# üöÄ BATCH LOGIN MANAGER - H∆Ø·ªöNG D·∫™N S·ª¨ D·ª§NG

## T·ª± ƒë·ªông ƒëƒÉng nh·∫≠p h√†ng lo·∫°t t√†i kho·∫£n Facebook v·ªõi 2FA

---

## üìã FORMAT C·ª¶A CHU·ªñI T√ÄI KHO·∫¢N

```
accountId|password|2faSecret|email|password2|email2
```

### Gi·∫£i th√≠ch t·ª´ng ph·∫ßn:

1. **accountId**: Facebook User ID (s·ªë, v√≠ d·ª•: 61568434832204)
2. **password**: M·∫≠t kh·∫©u ƒëƒÉng nh·∫≠p
3. **2faSecret**: TOTP secret key (Base32, v√≠ d·ª•: YDTCEYESIW4LBVLKK3A5HW3ZJKQ3SAF2)
4. **email**: Email ƒëƒÉng nh·∫≠p ch√≠nh
5. **password2**: M·∫≠t kh·∫©u backup (optional, m·∫∑c ƒë·ªãnh = password)
6. **email2**: Email backup (optional, m·∫∑c ƒë·ªãnh = email)

### V√≠ d·ª•:

```
61568434832204|Moimedia@@|YDTCEYESIW4LBVLKK3A5HW3ZJKQ3SAF2|chelcabula@outlook.com|Moimedia@@@|chelcabulamoi@smvmail.com
```

---

## üéØ S·ª¨ D·ª§NG C∆† B·∫¢N

### C√°ch 1: ƒêƒÉng nh·∫≠p 1 t√†i kho·∫£n

```javascript
const BatchLoginManager = require('./src/main/utils/BatchLoginManager');

const manager = new BatchLoginManager(mainWindow);

// Parse chu·ªói
const parseResult = manager.parseAccountString(
  '61568434832204|Moimedia@@|YDTCEYESIW4LBVLKK3A5HW3ZJKQ3SAF2|chelcabula@outlook.com|Moimedia@@@|chelcabulamoi@smvmail.com'
);

if (parseResult.success) {
  const account = parseResult.account;
  
  // Login
  const result = await manager.loginSingleAccount(account, {
    headless: false,        // Hi·ªán browser
    useProxy: false,        // Kh√¥ng d√πng proxy
    skipIfHasSession: true, // B·ªè qua n·∫øu ƒë√£ c√≥ session
  });
  
  if (result.success) {
    console.log(`‚úÖ ƒêƒÉng nh·∫≠p th√†nh c√¥ng: ${result.userName}`);
  }
}
```

### C√°ch 2: ƒêƒÉng nh·∫≠p nhi·ªÅu t√†i kho·∫£n (BATCH)

```javascript
const batchString = `
61568434832204|Moimedia@@|YDTCEYESIW4LBVLKK3A5HW3ZJKQ3SAF2|chelcabula@outlook.com|Moimedia@@@|chelcabulamoi@smvmail.com
61568434832205|Password123|ABCDEFGHIJKLMNOP2345|user2@email.com
61568434832206|Password456|QRSTUVWXYZ123456789A|user3@email.com
61568434832207|Password789|BCDEFGHIJKLMNOP34567|user4@email.com
61568434832208|PasswordXYZ|CDEFGHIJKLMNOP456789|user5@email.com
61568434832209|PasswordABC|DEFGHIJKLMNOP5678901|user6@email.com
`;

const result = await manager.loginBatch(batchString, {
  headless: true,              // Ch·∫°y ·∫©n (nhanh h∆°n)
  useProxy: false,             // D√πng proxy (khuy·∫øn ngh·ªã)
  skipIfHasSession: true,      // B·ªè qua n·∫øu ƒë√£ c√≥ session
  delayBetweenAccounts: [60000, 120000], // Delay 1-2 ph√∫t gi·ªØa c√°c accounts
  stopOnError: false,          // Ti·∫øp t·ª•c n·∫øu c√≥ l·ªói
});

console.log(`
T·ªïng: ${result.total}
Th√†nh c√¥ng: ${result.successCount}
Th·∫•t b·∫°i: ${result.failedCount}
`);
```

---

## üí° T√çNH NƒÇNG CH√çNH

### ‚úÖ T·ª± ƒë·ªông parse v√† validate

```javascript
// Parse batch
const parseResult = manager.parseBatchString(batchString);

console.log(`
Total: ${parseResult.total}
Valid: ${parseResult.valid}
Invalid: ${parseResult.invalid}
`);

// Hi·ªán l·ªói
parseResult.errors.forEach(err => {
  console.log(`Line ${err.line}: ${err.error}`);
});
```

### ‚úÖ 2FA Automation ho√†n to√†n

- T·ª± ƒë·ªông detect 2FA page
- T·ª± ƒë·ªông generate TOTP code
- T·ª± ƒë·ªông ƒëi·ªÅn v√† submit
- Kh√¥ng c·∫ßn thao t√°c th·ªß c√¥ng

### ‚úÖ Session Persistence tuy·ªát ƒë·ªëi

- M·ªói account c√≥ User Data Directory ri√™ng
- Session ƒë∆∞·ª£c l∆∞u vƒ©nh vi·ªÖn
- L·∫ßn sau kh√¥ng c·∫ßn ƒëƒÉng nh·∫≠p l·∫°i
- T·∫Øt m√°y b·∫≠t l·∫°i v·∫´n ƒëƒÉng nh·∫≠p ƒë∆∞·ª£c

### ‚úÖ Skip n·∫øu ƒë√£ c√≥ session

```javascript
// Check sessions tr∆∞·ªõc khi login
const accountIds = [
  '61568434832204',
  '61568434832205',
  '61568434832206',
];

const sessions = await manager.verifyAllSessions(accountIds);

sessions.forEach(s => {
  console.log(`${s.accountId}: ${s.hasSession ? '‚úÖ C√≥ session' : '‚ùå Kh√¥ng c√≥ session'}`);
});
```

### ‚úÖ Export results

```javascript
// Export k·∫øt qu·∫£ ra file
manager.exportResults('./batch_login_results.txt');
```

---

## üîß T√çCH H·ª¢P V√ÄO ELECTRON APP

### File: `src/main/main.js`

```javascript
const BatchLoginManager = require('./utils/BatchLoginManager');
const ProxyManager = require('./utils/ProxyManager');

// Kh·ªüi t·∫°o
const proxyManager = new ProxyManager();
const batchManager = new BatchLoginManager(mainWindow, {
  proxyManager: proxyManager,
});

// IPC Handler
ipcMain.handle('batch-login', async (event, batchString, options) => {
  try {
    const result = await batchManager.loginBatch(batchString, options);
    return result;
  } catch (error) {
    return { success: false, error: error.message };
  }
});

// Parse accounts (ƒë·ªÉ preview tr∆∞·ªõc khi login)
ipcMain.handle('parse-batch', async (event, batchString) => {
  const result = batchManager.parseBatchString(batchString);
  return result;
});

// Verify sessions
ipcMain.handle('verify-sessions', async (event, accountIds) => {
  const result = await batchManager.verifyAllSessions(accountIds);
  return result;
});
```

### File: `src/renderer/app.js`

```javascript
// HTML
<div id="batch-login-section">
  <h2>üöÄ Batch Login Manager</h2>
  
  <textarea id="batch-accounts" rows="10" cols="80" placeholder="Nh·∫≠p accounts (m·ªói d√≤ng 1 account)
Format: accountId|password|2faSecret|email|password2|email2

Example:
61568434832204|Moimedia@@|YDTCEYESIW4LBVLKK3A5HW3ZJKQ3SAF2|chelcabula@outlook.com"></textarea>
  
  <div>
    <label><input type="checkbox" id="batch-headless" checked> Ch·∫°y ·∫©n (headless)</label>
    <label><input type="checkbox" id="batch-proxy"> D√πng proxy</label>
    <label><input type="checkbox" id="batch-skip-session" checked> B·ªè qua n·∫øu c√≥ session</label>
  </div>
  
  <button id="parse-batch-btn">1. Parse & Preview</button>
  <button id="batch-login-btn">2. ƒêƒÉng nh·∫≠p h√†ng lo·∫°t</button>
  
  <div id="batch-preview"></div>
  <div id="batch-progress"></div>
  <div id="batch-results"></div>
</div>

// JavaScript
document.getElementById('parse-batch-btn').addEventListener('click', async () => {
  const batchString = document.getElementById('batch-accounts').value;
  
  const result = await window.api.invoke('parse-batch', batchString);
  
  const preview = document.getElementById('batch-preview');
  
  if (result.success) {
    preview.innerHTML = `
      <h3>Preview:</h3>
      <p>‚úÖ Valid: ${result.valid} accounts</p>
      <p>‚ùå Invalid: ${result.invalid} accounts</p>
      
      <h4>Valid Accounts:</h4>
      <ul>
        ${result.accounts.map(acc => `
          <li>
            <strong>${acc.email}</strong> (ID: ${acc.accountId})
            ${acc.twoFASecret ? 'üîê Has 2FA' : ''}
          </li>
        `).join('')}
      </ul>
      
      ${result.errors.length > 0 ? `
        <h4>Errors:</h4>
        <ul>
          ${result.errors.map(err => `
            <li>Line ${err.line}: ${err.error}</li>
          `).join('')}
        </ul>
      ` : ''}
    `;
  } else {
    preview.innerHTML = `<p style="color: red;">‚ùå Error: ${result.error}</p>`;
  }
});

document.getElementById('batch-login-btn').addEventListener('click', async () => {
  const batchString = document.getElementById('batch-accounts').value;
  const headless = document.getElementById('batch-headless').checked;
  const useProxy = document.getElementById('batch-proxy').checked;
  const skipIfHasSession = document.getElementById('batch-skip-session').checked;
  
  const options = {
    headless,
    useProxy,
    skipIfHasSession,
    delayBetweenAccounts: [60000, 120000], // 1-2 minutes
  };
  
  const progressDiv = document.getElementById('batch-progress');
  progressDiv.innerHTML = '<p>‚è≥ ƒêang ƒëƒÉng nh·∫≠p...</p>';
  
  const result = await window.api.invoke('batch-login', batchString, options);
  
  const resultsDiv = document.getElementById('batch-results');
  
  if (result.success) {
    resultsDiv.innerHTML = `
      <h3>üéâ Ho√†n th√†nh!</h3>
      <p>‚úÖ Th√†nh c√¥ng: ${result.successCount}/${result.total}</p>
      <p>‚ùå Th·∫•t b·∫°i: ${result.failedCount}/${result.total}</p>
      
      <h4>Chi ti·∫øt:</h4>
      <ul>
        ${result.results.map(r => `
          <li>
            ${r.success ? '‚úÖ' : '‚ùå'} ${r.email}
            ${r.success ? `(${r.userName || 'N/A'})` : `- ${r.error}`}
            ${r.skipped ? '(ƒë√£ c√≥ session)' : ''}
          </li>
        `).join('')}
      </ul>
    `;
  } else {
    resultsDiv.innerHTML = `<p style="color: red;">‚ùå Error: ${result.error}</p>`;
  }
  
  progressDiv.innerHTML = '';
});

// Listen to batch progress
window.api.on('batch-progress', (data) => {
  const progressDiv = document.getElementById('batch-progress');
  progressDiv.innerHTML = `
    <p>‚è≥ Progress: ${data.current}/${data.total}</p>
    <p>${data.message}</p>
    <p>‚úÖ Success: ${data.successCount} | ‚ùå Failed: ${data.failedCount}</p>
  `;
});

// Listen to batch logs
window.api.on('batch-log', (log) => {
  console.log(`[${log.type}] ${log.message}`);
});
```

---

## üìä WORKFLOW HO√ÄN CH·ªàNH

### 1. Chu·∫©n b·ªã accounts

```text
# File: accounts.txt
61568434832204|Moimedia@@|YDTCEYESIW4LBVLKK3A5HW3ZJKQ3SAF2|chelcabula@outlook.com
61568434832205|Password123|ABCDEFGHIJKLMNOP2345|user2@email.com
61568434832206|Password456|QRSTUVWXYZ123456789A|user3@email.com
61568434832207|Password789|BCDEFGHIJKLMNOP34567|user4@email.com
61568434832208|PasswordXYZ|CDEFGHIJKLMNOP456789|user5@email.com
61568434832209|PasswordABC|DEFGHIJKLMNOP5678901|user6@email.com
```

### 2. Parse v√† validate

```javascript
const fs = require('fs');
const batchString = fs.readFileSync('./accounts.txt', 'utf8');

const parseResult = manager.parseBatchString(batchString);

console.log(`
‚úÖ Valid: ${parseResult.valid}
‚ùå Invalid: ${parseResult.invalid}
`);
```

### 3. Login batch (l·∫ßn ƒë·∫ßu)

```javascript
const result = await manager.loginBatch(batchString, {
  headless: true,
  useProxy: true,
  skipIfHasSession: true,
  delayBetweenAccounts: [60000, 120000],
});

console.log(`
Th√†nh c√¥ng: ${result.successCount}/${result.total}
`);
```

### 4. Verify sessions

```javascript
// L·∫ßn sau, check sessions tr∆∞·ªõc
const accountIds = parseResult.accounts.map(a => a.accountId);
const sessions = await manager.verifyAllSessions(accountIds);

// Ch·ªâ login c√°c accounts kh√¥ng c√≥ session
const needLogin = sessions.filter(s => !s.hasSession);
console.log(`C·∫ßn login l·∫°i: ${needLogin.length} accounts`);
```

### 5. Export results

```javascript
manager.exportResults('./results.txt');
```

---

## üî• C√ÅC T√åNH HU·ªêNG S·ª¨ D·ª§NG

### T√¨nh hu·ªëng 1: ƒêƒÉng nh·∫≠p l·∫ßn ƒë·∫ßu (6 accounts)

```javascript
const batchString = `
61568434832204|Moimedia@@|YDTCEYESIW4LBVLKK3A5HW3ZJKQ3SAF2|chelcabula@outlook.com
61568434832205|Password123|ABCDEFGHIJKLMNOP2345|user2@email.com
61568434832206|Password456|QRSTUVWXYZ123456789A|user3@email.com
61568434832207|Password789|BCDEFGHIJKLMNOP34567|user4@email.com
61568434832208|PasswordXYZ|CDEFGHIJKLMNOP456789|user5@email.com
61568434832209|PasswordABC|DEFGHIJKLMNOP5678901|user6@email.com
`;

// Login t·∫•t c·∫£
await manager.loginBatch(batchString, {
  headless: true,
  skipIfHasSession: true,
});

// K·∫øt qu·∫£: 6 accounts ƒëƒÉng nh·∫≠p th√†nh c√¥ng, session ƒë∆∞·ª£c l∆∞u
```

### T√¨nh hu·ªëng 2: ƒêƒÉng nh·∫≠p l·∫°i sau khi t·∫Øt m√°y

```javascript
// Ch·∫°y l·∫°i c√πng batch string
await manager.loginBatch(batchString, {
  headless: true,
  skipIfHasSession: true, // ‚úÖ B·ªè qua v√¨ ƒë√£ c√≥ session
});

// K·∫øt qu·∫£: T·∫•t c·∫£ 6 accounts skip v√¨ ƒë√£ c√≥ session!
```

### T√¨nh hu·ªëng 3: Th√™m 4 accounts m·ªõi (total 10)

```javascript
const batchString = `
61568434832204|Moimedia@@|YDTCEYESIW4LBVLKK3A5HW3ZJKQ3SAF2|chelcabula@outlook.com
61568434832205|Password123|ABCDEFGHIJKLMNOP2345|user2@email.com
61568434832206|Password456|QRSTUVWXYZ123456789A|user3@email.com
61568434832207|Password789|BCDEFGHIJKLMNOP34567|user4@email.com
61568434832208|PasswordXYZ|CDEFGHIJKLMNOP456789|user5@email.com
61568434832209|PasswordABC|DEFGHIJKLMNOP5678901|user6@email.com
61568434832210|NewPass111|EFGHIJKLMNOP67890123|user7@email.com
61568434832211|NewPass222|FGHIJKLMNOP678901234|user8@email.com
61568434832212|NewPass333|GHIJKLMNOP6789012345|user9@email.com
61568434832213|NewPass444|HIJKLMNOP67890123456|user10@email.com
`;

await manager.loginBatch(batchString, {
  headless: true,
  skipIfHasSession: true,
});

// K·∫øt qu·∫£:
// - 6 accounts c≈©: Skip (c√≥ session)
// - 4 accounts m·ªõi: ƒêƒÉng nh·∫≠p m·ªõi
// Total: 10 accounts s·∫µn s√†ng s·ª≠ d·ª•ng
```

---

## ‚öôÔ∏è T√ôY CH·ªåN N√ÇNG CAO

### V·ªõi Proxy

```javascript
const ProxyManager = require('./utils/ProxyManager');
const proxyManager = new ProxyManager();

// Add proxies
proxyManager.addProxy({
  server: 'http://proxy1.com:8080',
  username: 'user',
  password: 'pass',
  type: 'residential',
  country: 'US',
});

// Pass v√†o manager
const manager = new BatchLoginManager(mainWindow, {
  proxyManager: proxyManager,
});

// Login v·ªõi proxy
await manager.loginBatch(batchString, {
  useProxy: true, // ‚úÖ Enable proxy
});
```

### Custom delay

```javascript
await manager.loginBatch(batchString, {
  delayBetweenAccounts: [30000, 60000], // 30s - 1 ph√∫t
  // ho·∫∑c
  delayBetweenAccounts: [120000, 180000], // 2-3 ph√∫t (safer)
});
```

### Stop on error

```javascript
await manager.loginBatch(batchString, {
  stopOnError: true, // D·ª´ng ngay n·∫øu c√≥ l·ªói
});
```

---

## üéØ K·∫æT QU·∫¢ MONG ƒê·ª¢I

### L·∫ßn 1: ƒêƒÉng nh·∫≠p ban ƒë·∫ßu

```
üìã Parsing batch accounts...
‚úÖ Parsed 6 accounts: 6 valid, 0 invalid

üöÄ B·∫Øt ƒë·∫ßu ƒëƒÉng nh·∫≠p 6 accounts...

============================================================
üì± ACCOUNT 1/6
============================================================
üöÄ ƒêang ƒëƒÉng nh·∫≠p: chelcabula@outlook.com (ID: 61568434832204)
üíæ User Data Directory: ./user_data/profile_61568434832204
üîê S·ª≠ d·ª•ng 2FA automation...
üîë M√£ 2FA: 123456 (c√≤n 25s)
‚úÖ ƒêƒÉng nh·∫≠p th√†nh c√¥ng v·ªõi 2FA: Chelca Bula
üíæ ƒêang l∆∞u session...

‚úÖ Th√†nh c√¥ng: chelcabula@outlook.com

‚è≥ Ch·ªù 87s tr∆∞·ªõc khi ƒëƒÉng nh·∫≠p account ti·∫øp theo...

... (t∆∞∆°ng t·ª± cho 5 accounts c√≤n l·∫°i) ...

============================================================
üéâ HO√ÄN TH√ÄNH BATCH LOGIN
============================================================
‚úÖ Th√†nh c√¥ng: 6/6
‚ùå Th·∫•t b·∫°i: 0/6
```

### L·∫ßn 2: ƒêƒÉng nh·∫≠p l·∫°i (c√≥ session)

```
üìã Parsing batch accounts...
‚úÖ Parsed 6 accounts: 6 valid, 0 invalid

üöÄ B·∫Øt ƒë·∫ßu ƒëƒÉng nh·∫≠p 6 accounts...

============================================================
üì± ACCOUNT 1/6
============================================================
üöÄ ƒêang ƒëƒÉng nh·∫≠p: chelcabula@outlook.com (ID: 61568434832204)
‚úÖ Account 61568434832204 ƒë√£ c√≥ session, b·ªè qua ƒëƒÉng nh·∫≠p

‚úÖ Th√†nh c√¥ng: chelcabula@outlook.com (skipped - c√≥ session)

... (t·∫•t c·∫£ ƒë·ªÅu skip) ...

============================================================
üéâ HO√ÄN TH√ÄNH BATCH LOGIN
============================================================
‚úÖ Th√†nh c√¥ng: 6/6 (all skipped)
‚ùå Th·∫•t b·∫°i: 0/6
```

---

## üìö FAQ

### Q: C√≥ c·∫ßn ƒëƒÉng nh·∫≠p l·∫°i sau m·ªói l·∫ßn t·∫Øt m√°y kh√¥ng?

**A:** KH√îNG! Session ƒë∆∞·ª£c l∆∞u vƒ©nh vi·ªÖn trong User Data Directory. T·∫Øt m√°y b·∫≠t l·∫°i v·∫´n gi·ªØ nguy√™n session.

### Q: 2FA c√≥ c·∫ßn thao t√°c th·ªß c√¥ng kh√¥ng?

**A:** KH√îNG! H·ªá th·ªëng t·ª± ƒë·ªông generate TOTP code v√† ƒëi·ªÅn v√†o. Ho√†n to√†n automation.

### Q: Bao l√¢u n√™n ƒëƒÉng nh·∫≠p l·∫°i?

**A:** Session Facebook th∆∞·ªùng t·ªìn t·∫°i 30-60 ng√†y. Sau ƒë√≥ s·∫Ω c·∫ßn ƒëƒÉng nh·∫≠p l·∫°i.

### Q: C√≥ gi·ªõi h·∫°n s·ªë l∆∞·ª£ng accounts kh√¥ng?

**A:** Kh√¥ng c√≥ gi·ªõi h·∫°n. C√≥ th·ªÉ login 10, 50, 100+ accounts.

### Q: Delay gi·ªØa c√°c accounts l√† bao nhi√™u?

**A:** M·∫∑c ƒë·ªãnh 1-2 ph√∫t. C√≥ th·ªÉ t√πy ch·ªânh. Khuy·∫øn ngh·ªã kh√¥ng d∆∞·ªõi 30s.

### Q: C√≥ an to√†n kh√¥ng?

**A:** C√ì! S·ª≠ d·ª•ng:
- User Data Directory persistent (nh∆∞ Chrome profile th·∫≠t)
- Stealth configuration (anti-detection)
- Human behavior simulation
- Proxy support

---

## üéâ K·∫æT LU·∫¨N

V·ªõi BatchLoginManager, b·∫°n c√≥ th·ªÉ:

‚úÖ **Nh·∫≠p chu·ªói accounts** ‚Üí Parse automatic

‚úÖ **ƒêƒÉng nh·∫≠p t·ª± ƒë·ªông** ‚Üí 2FA automation ho√†n to√†n

‚úÖ **Session persistence** ‚Üí T·∫Øt m√°y b·∫≠t l·∫°i v·∫´n login ƒë∆∞·ª£c

‚úÖ **Skip n·∫øu c√≥ session** ‚Üí Kh√¥ng waste time

‚úÖ **Batch processing** ‚Üí 6 accounts, 10 accounts, 100 accounts

‚úÖ **Anti-detection** ‚Üí Stealth nh∆∞ ng∆∞·ªùi th·∫≠t

---

**Happy Batch Login! üöÄ**

